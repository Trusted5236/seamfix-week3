<div class="product-list-container">
  
  <!-- Search Bar Section -->
  <div class="search-section">
    <!-- Add this at the very top of your product-list template, before the search bar -->
<div class="create-product-section">
  <button class="btn-create-product" routerLink="/products/new">
    + Create New Product
  </button>
</div>

    <div class="search-wrapper">
      <input 
        type="text" 
        class="search-input"
        [(ngModel)]="searchTerm"
        (input)="onSearch()"
        placeholder="Search for products..."
      />
      <span class="search-icon">üîç</span>
    </div>
    
    <!-- Search Results Info -->
    <div class="search-info" *ngIf="searchTerm">
      <p>Showing {{ (filteredProducts$ | async)?.length || 0 }} results for "{{ searchTerm }}"</p>
    </div>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="error$ | async as error">
    <div class="error-icon">‚ö†Ô∏è</div>
    <h3>Error Loading Products</h3>
    <p class="error-message">{{ error }}</p>
    <button class="btn-retry" (click)="loadProducts()">Retry</button>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading$ | async">
    <div class="spinner"></div>
    <p>Loading products...</p>
  </div>

  

  <!-- Products Grid -->
  <div class="products-grid" *ngIf="!(loading$ | async) && !(error$ | async)">
    <div 
      *ngFor="let product of filteredProducts$ | async"
      class="product-wrapper"
    >
      <div 
        class="product-card"
        [class.selected-card]="isSelected$(product.id) | async"
        [routerLink]="['/products', product.id]"
        [queryParams]="{ category: product.category }"
      >
        <!-- Product Image -->
        <div class="product-image-wrapper">
          <img 
            [src]="product.imageUrl" 
            [alt]="product.name"
            class="product-image"
          />
          <span 
            class="stock-badge"
            [class.in-stock]="product.inStock"
            [class.out-of-stock]="!product.inStock"
          >
            {{ product.inStock ? 'In Stock' : 'Out of Stock' }}
          </span>
        </div>

        <!-- Product Info -->
        <div class="product-info">
          <h3 class="product-name">{{ product.name }}</h3>
          <p class="product-description">{{ product.description }}</p>
          
          <div class="product-footer">
            <span class="product-price">{{ product.price | currency }}</span>
            <span class="product-rating">‚≠ê {{ product.rating }}</span>
          </div>

          <!-- Select Button -->
          <button 
            class="select-btn"
            [class.selected]="isSelected$(product.id) | async"
            (click)="onProductSelect(product, $event)"
          >
            {{ (isSelected$(product.id) | async) ? '‚úì Selected' : 'Select Product' }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div class="no-results" *ngIf="!(loading$ | async) && !(error$ | async) && (filteredProducts$ | async)?.length === 0 && !searchTerm">
    <div class="no-results-icon">üì¶</div>
    <h3>No Products Available</h3>
    <p>Start by creating your first product!</p>
    <button class="btn-create-product" routerLink="/products/new">
      + Create Product
    </button>
  </div>

  <!-- No Results Message -->
  <div class="no-results" *ngIf="!(loading$ | async) && !(error$ | async) && (filteredProducts$ | async)?.length === 0 && searchTerm">
    <div class="no-results-icon">üîç</div>
    <h3>No products found</h3>
    <p>No products match your search "{{ searchTerm }}"</p>
    <button class="btn-clear" (click)="searchTerm = ''; onSearch()">
      Clear Search
    </button>
  </div>

</div>